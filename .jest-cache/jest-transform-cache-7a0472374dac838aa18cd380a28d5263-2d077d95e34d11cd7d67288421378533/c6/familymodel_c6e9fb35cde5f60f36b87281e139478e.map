{"version":3,"sources":["C:\\Users\\USER\\Desktop\\guardian-grove\\guardian-grove-backend\\src\\models\\family.model.ts"],"sourcesContent":["import { Schema, model, Types } from \"mongoose\";\r\nimport { IFamily } from \"../interfaces/IFamily\";\r\nimport { User } from \"./user.model\";\r\nimport { goalSchema } from \"./schemas/goal.schema\";\r\nimport { notificationSchema } from \"./schemas/notification.schema\";\r\nimport { unlockedAchievementSchema } from \"./schemas/unlockedAchievementSchema.schema\";\r\nimport { storySchema } from \"./schemas/story.schema\";\r\n\r\nconst familySchema = new Schema<IFamily>({\r\n    _id: { type: Schema.Types.ObjectId, auto: true },\r\n    familyName: { type: String, required: true, unique: true },\r\n    members: [\r\n        {\r\n            _id: { type: Types.ObjectId, ref: \"User\", required: true },\r\n            name: { type: String, required: true },\r\n            role: { type: String, required: true, enum: ['parent', 'admin', 'child'] },\r\n            gender: { type: String, required: true, enum: ['female', 'male'] },\r\n            avatar: { type: String, required: true },\r\n        },\r\n    ],\r\n    email: { type: String, required: true, unique: true },\r\n    createdAt: { type: Date, required: true },\r\n    totalStars: { type: Number, default: 0 },\r\n    tasks: { type: Number, default: 0 },\r\n    notifications: { type: [notificationSchema], default: [] },\r\n    goals: { type: [goalSchema], default: [] },\r\n    achievements: { type: [unlockedAchievementSchema], default: [] },\r\n    stars: {\r\n        daily: { type: Number, default: 0 },\r\n        weekly: { type: Number, default: 0 },\r\n        monthly: { type: Number, default: 0 },\r\n        yearly: { type: Number, default: 0 }\r\n    },\r\n    taskCounts: {\r\n        daily: { type: Number, default: 0 },\r\n        weekly: { type: Number, default: 0 },\r\n        monthly: { type: Number, default: 0 },\r\n        yearly: { type: Number, default: 0 }\r\n    },\r\n    familyAvatar: { type: String, required: true },\r\n    sharedStories: { type: [storySchema], default: [] },\r\n});\r\n\r\n// Ensure virtuals are included in JSON response\r\nfamilySchema.set(\"toJSON\", { virtuals: true });\r\nfamilySchema.set(\"toObject\", { virtuals: true });\r\n\r\nexport const Family = model<IFamily>(\"Family\", familySchema);\r\n"],"names":["Family","familySchema","Schema","_id","type","Types","ObjectId","auto","familyName","String","required","unique","members","ref","name","role","enum","gender","avatar","email","createdAt","Date","totalStars","Number","default","tasks","notifications","notificationSchema","goals","goalSchema","achievements","unlockedAchievementSchema","stars","daily","weekly","monthly","yearly","taskCounts","familyAvatar","sharedStories","storySchema","set","virtuals","model"],"mappings":";;;;+BA+CaA;;;eAAAA;;;0BA/CwB;4BAGV;oCACQ;iDACO;6BACd;AAE5B,MAAMC,eAAe,IAAIC,gBAAM,CAAU;IACrCC,KAAK;QAAEC,MAAMF,gBAAM,CAACG,KAAK,CAACC,QAAQ;QAAEC,MAAM;IAAK;IAC/CC,YAAY;QAAEJ,MAAMK;QAAQC,UAAU;QAAMC,QAAQ;IAAK;IACzDC,SAAS;QACL;YACIT,KAAK;gBAAEC,MAAMC,eAAK,CAACC,QAAQ;gBAAEO,KAAK;gBAAQH,UAAU;YAAK;YACzDI,MAAM;gBAAEV,MAAMK;gBAAQC,UAAU;YAAK;YACrCK,MAAM;gBAAEX,MAAMK;gBAAQC,UAAU;gBAAMM,MAAM;oBAAC;oBAAU;oBAAS;iBAAQ;YAAC;YACzEC,QAAQ;gBAAEb,MAAMK;gBAAQC,UAAU;gBAAMM,MAAM;oBAAC;oBAAU;iBAAO;YAAC;YACjEE,QAAQ;gBAAEd,MAAMK;gBAAQC,UAAU;YAAK;QAC3C;KACH;IACDS,OAAO;QAAEf,MAAMK;QAAQC,UAAU;QAAMC,QAAQ;IAAK;IACpDS,WAAW;QAAEhB,MAAMiB;QAAMX,UAAU;IAAK;IACxCY,YAAY;QAAElB,MAAMmB;QAAQC,SAAS;IAAE;IACvCC,OAAO;QAAErB,MAAMmB;QAAQC,SAAS;IAAE;IAClCE,eAAe;QAAEtB,MAAM;YAACuB,sCAAkB;SAAC;QAAEH,SAAS,EAAE;IAAC;IACzDI,OAAO;QAAExB,MAAM;YAACyB,sBAAU;SAAC;QAAEL,SAAS,EAAE;IAAC;IACzCM,cAAc;QAAE1B,MAAM;YAAC2B,0DAAyB;SAAC;QAAEP,SAAS,EAAE;IAAC;IAC/DQ,OAAO;QACHC,OAAO;YAAE7B,MAAMmB;YAAQC,SAAS;QAAE;QAClCU,QAAQ;YAAE9B,MAAMmB;YAAQC,SAAS;QAAE;QACnCW,SAAS;YAAE/B,MAAMmB;YAAQC,SAAS;QAAE;QACpCY,QAAQ;YAAEhC,MAAMmB;YAAQC,SAAS;QAAE;IACvC;IACAa,YAAY;QACRJ,OAAO;YAAE7B,MAAMmB;YAAQC,SAAS;QAAE;QAClCU,QAAQ;YAAE9B,MAAMmB;YAAQC,SAAS;QAAE;QACnCW,SAAS;YAAE/B,MAAMmB;YAAQC,SAAS;QAAE;QACpCY,QAAQ;YAAEhC,MAAMmB;YAAQC,SAAS;QAAE;IACvC;IACAc,cAAc;QAAElC,MAAMK;QAAQC,UAAU;IAAK;IAC7C6B,eAAe;QAAEnC,MAAM;YAACoC,wBAAW;SAAC;QAAEhB,SAAS,EAAE;IAAC;AACtD;AAEA,gDAAgD;AAChDvB,aAAawC,GAAG,CAAC,UAAU;IAAEC,UAAU;AAAK;AAC5CzC,aAAawC,GAAG,CAAC,YAAY;IAAEC,UAAU;AAAK;AAEvC,MAAM1C,SAAS2C,IAAAA,eAAK,EAAU,UAAU1C"}