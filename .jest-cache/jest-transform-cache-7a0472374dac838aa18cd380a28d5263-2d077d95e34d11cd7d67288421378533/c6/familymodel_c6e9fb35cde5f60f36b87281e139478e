5ab76a63337152d070ff4e9af3fc81f8
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "Family", {
    enumerable: true,
    get: function() {
        return Family;
    }
});
const _mongoose = require("mongoose");
const _goalschema = require("./schemas/goal.schema");
const _notificationschema = require("./schemas/notification.schema");
const _unlockedAchievementSchemaschema = require("./schemas/unlockedAchievementSchema.schema");
const _storyschema = require("./schemas/story.schema");
const familySchema = new _mongoose.Schema({
    _id: {
        type: _mongoose.Schema.Types.ObjectId,
        auto: true
    },
    familyName: {
        type: String,
        required: true,
        unique: true
    },
    members: [
        {
            _id: {
                type: _mongoose.Types.ObjectId,
                ref: "User",
                required: true
            },
            name: {
                type: String,
                required: true
            },
            role: {
                type: String,
                required: true,
                enum: [
                    'parent',
                    'admin',
                    'child'
                ]
            },
            gender: {
                type: String,
                required: true,
                enum: [
                    'female',
                    'male'
                ]
            },
            avatar: {
                type: String,
                required: true
            }
        }
    ],
    email: {
        type: String,
        required: true,
        unique: true
    },
    createdAt: {
        type: Date,
        required: true
    },
    totalStars: {
        type: Number,
        default: 0
    },
    tasks: {
        type: Number,
        default: 0
    },
    notifications: {
        type: [
            _notificationschema.notificationSchema
        ],
        default: []
    },
    goals: {
        type: [
            _goalschema.goalSchema
        ],
        default: []
    },
    achievements: {
        type: [
            _unlockedAchievementSchemaschema.unlockedAchievementSchema
        ],
        default: []
    },
    stars: {
        daily: {
            type: Number,
            default: 0
        },
        weekly: {
            type: Number,
            default: 0
        },
        monthly: {
            type: Number,
            default: 0
        },
        yearly: {
            type: Number,
            default: 0
        }
    },
    taskCounts: {
        daily: {
            type: Number,
            default: 0
        },
        weekly: {
            type: Number,
            default: 0
        },
        monthly: {
            type: Number,
            default: 0
        },
        yearly: {
            type: Number,
            default: 0
        }
    },
    familyAvatar: {
        type: String,
        required: true
    },
    sharedStories: {
        type: [
            _storyschema.storySchema
        ],
        default: []
    }
});
// Ensure virtuals are included in JSON response
familySchema.set("toJSON", {
    virtuals: true
});
familySchema.set("toObject", {
    virtuals: true
});
const Family = (0, _mongoose.model)("Family", familySchema);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVVNFUlxcRGVza3RvcFxcZ3VhcmRpYW4tZ3JvdmVcXGd1YXJkaWFuLWdyb3ZlLWJhY2tlbmRcXHNyY1xcbW9kZWxzXFxmYW1pbHkubW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hLCBtb2RlbCwgVHlwZXMgfSBmcm9tIFwibW9uZ29vc2VcIjtcclxuaW1wb3J0IHsgSUZhbWlseSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL0lGYW1pbHlcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3VzZXIubW9kZWxcIjtcclxuaW1wb3J0IHsgZ29hbFNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYXMvZ29hbC5zY2hlbWFcIjtcclxuaW1wb3J0IHsgbm90aWZpY2F0aW9uU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hcy9ub3RpZmljYXRpb24uc2NoZW1hXCI7XHJcbmltcG9ydCB7IHVubG9ja2VkQWNoaWV2ZW1lbnRTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFzL3VubG9ja2VkQWNoaWV2ZW1lbnRTY2hlbWEuc2NoZW1hXCI7XHJcbmltcG9ydCB7IHN0b3J5U2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hcy9zdG9yeS5zY2hlbWFcIjtcclxuXHJcbmNvbnN0IGZhbWlseVNjaGVtYSA9IG5ldyBTY2hlbWE8SUZhbWlseT4oe1xyXG4gICAgX2lkOiB7IHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgYXV0bzogdHJ1ZSB9LFxyXG4gICAgZmFtaWx5TmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICAgIG1lbWJlcnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9pZDogeyB0eXBlOiBUeXBlcy5PYmplY3RJZCwgcmVmOiBcIlVzZXJcIiwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgICAgICAgICAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgICAgICAgIHJvbGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgZW51bTogWydwYXJlbnQnLCAnYWRtaW4nLCAnY2hpbGQnXSB9LFxyXG4gICAgICAgICAgICBnZW5kZXI6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgZW51bTogWydmZW1hbGUnLCAnbWFsZSddIH0sXHJcbiAgICAgICAgICAgIGF2YXRhcjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICAgICAgfSxcclxuICAgIF0sXHJcbiAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICAgIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgdG90YWxTdGFyczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIHRhc2tzOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgbm90aWZpY2F0aW9uczogeyB0eXBlOiBbbm90aWZpY2F0aW9uU2NoZW1hXSwgZGVmYXVsdDogW10gfSxcclxuICAgIGdvYWxzOiB7IHR5cGU6IFtnb2FsU2NoZW1hXSwgZGVmYXVsdDogW10gfSxcclxuICAgIGFjaGlldmVtZW50czogeyB0eXBlOiBbdW5sb2NrZWRBY2hpZXZlbWVudFNjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sXHJcbiAgICBzdGFyczoge1xyXG4gICAgICAgIGRhaWx5OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgICAgIHdlZWtseTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgICAgICBtb250aGx5OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgICAgIHllYXJseTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfVxyXG4gICAgfSxcclxuICAgIHRhc2tDb3VudHM6IHtcclxuICAgICAgICBkYWlseTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgICAgICB3ZWVrbHk6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICAgICAgbW9udGhseTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgICAgICB5ZWFybHk6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH1cclxuICAgIH0sXHJcbiAgICBmYW1pbHlBdmF0YXI6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgc2hhcmVkU3RvcmllczogeyB0eXBlOiBbc3RvcnlTY2hlbWFdLCBkZWZhdWx0OiBbXSB9LFxyXG59KTtcclxuXHJcbi8vIEVuc3VyZSB2aXJ0dWFscyBhcmUgaW5jbHVkZWQgaW4gSlNPTiByZXNwb25zZVxyXG5mYW1pbHlTY2hlbWEuc2V0KFwidG9KU09OXCIsIHsgdmlydHVhbHM6IHRydWUgfSk7XHJcbmZhbWlseVNjaGVtYS5zZXQoXCJ0b09iamVjdFwiLCB7IHZpcnR1YWxzOiB0cnVlIH0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IEZhbWlseSA9IG1vZGVsPElGYW1pbHk+KFwiRmFtaWx5XCIsIGZhbWlseVNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJGYW1pbHkiLCJmYW1pbHlTY2hlbWEiLCJTY2hlbWEiLCJfaWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsImF1dG8iLCJmYW1pbHlOYW1lIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJtZW1iZXJzIiwicmVmIiwibmFtZSIsInJvbGUiLCJlbnVtIiwiZ2VuZGVyIiwiYXZhdGFyIiwiZW1haWwiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG90YWxTdGFycyIsIk51bWJlciIsImRlZmF1bHQiLCJ0YXNrcyIsIm5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25TY2hlbWEiLCJnb2FscyIsImdvYWxTY2hlbWEiLCJhY2hpZXZlbWVudHMiLCJ1bmxvY2tlZEFjaGlldmVtZW50U2NoZW1hIiwic3RhcnMiLCJkYWlseSIsIndlZWtseSIsIm1vbnRobHkiLCJ5ZWFybHkiLCJ0YXNrQ291bnRzIiwiZmFtaWx5QXZhdGFyIiwic2hhcmVkU3RvcmllcyIsInN0b3J5U2NoZW1hIiwic2V0IiwidmlydHVhbHMiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7OzsrQkErQ2FBOzs7ZUFBQUE7OzswQkEvQ3dCOzRCQUdWO29DQUNRO2lEQUNPOzZCQUNkO0FBRTVCLE1BQU1DLGVBQWUsSUFBSUMsZ0JBQU0sQ0FBVTtJQUNyQ0MsS0FBSztRQUFFQyxNQUFNRixnQkFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7UUFBRUMsTUFBTTtJQUFLO0lBQy9DQyxZQUFZO1FBQUVKLE1BQU1LO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3pEQyxTQUFTO1FBQ0w7WUFDSVQsS0FBSztnQkFBRUMsTUFBTUMsZUFBSyxDQUFDQyxRQUFRO2dCQUFFTyxLQUFLO2dCQUFRSCxVQUFVO1lBQUs7WUFDekRJLE1BQU07Z0JBQUVWLE1BQU1LO2dCQUFRQyxVQUFVO1lBQUs7WUFDckNLLE1BQU07Z0JBQUVYLE1BQU1LO2dCQUFRQyxVQUFVO2dCQUFNTSxNQUFNO29CQUFDO29CQUFVO29CQUFTO2lCQUFRO1lBQUM7WUFDekVDLFFBQVE7Z0JBQUViLE1BQU1LO2dCQUFRQyxVQUFVO2dCQUFNTSxNQUFNO29CQUFDO29CQUFVO2lCQUFPO1lBQUM7WUFDakVFLFFBQVE7Z0JBQUVkLE1BQU1LO2dCQUFRQyxVQUFVO1lBQUs7UUFDM0M7S0FDSDtJQUNEUyxPQUFPO1FBQUVmLE1BQU1LO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3BEUyxXQUFXO1FBQUVoQixNQUFNaUI7UUFBTVgsVUFBVTtJQUFLO0lBQ3hDWSxZQUFZO1FBQUVsQixNQUFNbUI7UUFBUUMsU0FBUztJQUFFO0lBQ3ZDQyxPQUFPO1FBQUVyQixNQUFNbUI7UUFBUUMsU0FBUztJQUFFO0lBQ2xDRSxlQUFlO1FBQUV0QixNQUFNO1lBQUN1QixzQ0FBa0I7U0FBQztRQUFFSCxTQUFTLEVBQUU7SUFBQztJQUN6REksT0FBTztRQUFFeEIsTUFBTTtZQUFDeUIsc0JBQVU7U0FBQztRQUFFTCxTQUFTLEVBQUU7SUFBQztJQUN6Q00sY0FBYztRQUFFMUIsTUFBTTtZQUFDMkIsMERBQXlCO1NBQUM7UUFBRVAsU0FBUyxFQUFFO0lBQUM7SUFDL0RRLE9BQU87UUFDSEMsT0FBTztZQUFFN0IsTUFBTW1CO1lBQVFDLFNBQVM7UUFBRTtRQUNsQ1UsUUFBUTtZQUFFOUIsTUFBTW1CO1lBQVFDLFNBQVM7UUFBRTtRQUNuQ1csU0FBUztZQUFFL0IsTUFBTW1CO1lBQVFDLFNBQVM7UUFBRTtRQUNwQ1ksUUFBUTtZQUFFaEMsTUFBTW1CO1lBQVFDLFNBQVM7UUFBRTtJQUN2QztJQUNBYSxZQUFZO1FBQ1JKLE9BQU87WUFBRTdCLE1BQU1tQjtZQUFRQyxTQUFTO1FBQUU7UUFDbENVLFFBQVE7WUFBRTlCLE1BQU1tQjtZQUFRQyxTQUFTO1FBQUU7UUFDbkNXLFNBQVM7WUFBRS9CLE1BQU1tQjtZQUFRQyxTQUFTO1FBQUU7UUFDcENZLFFBQVE7WUFBRWhDLE1BQU1tQjtZQUFRQyxTQUFTO1FBQUU7SUFDdkM7SUFDQWMsY0FBYztRQUFFbEMsTUFBTUs7UUFBUUMsVUFBVTtJQUFLO0lBQzdDNkIsZUFBZTtRQUFFbkMsTUFBTTtZQUFDb0Msd0JBQVc7U0FBQztRQUFFaEIsU0FBUyxFQUFFO0lBQUM7QUFDdEQ7QUFFQSxnREFBZ0Q7QUFDaER2QixhQUFhd0MsR0FBRyxDQUFDLFVBQVU7SUFBRUMsVUFBVTtBQUFLO0FBQzVDekMsYUFBYXdDLEdBQUcsQ0FBQyxZQUFZO0lBQUVDLFVBQVU7QUFBSztBQUV2QyxNQUFNMUMsU0FBUzJDLElBQUFBLGVBQUssRUFBVSxVQUFVMUMifQ==