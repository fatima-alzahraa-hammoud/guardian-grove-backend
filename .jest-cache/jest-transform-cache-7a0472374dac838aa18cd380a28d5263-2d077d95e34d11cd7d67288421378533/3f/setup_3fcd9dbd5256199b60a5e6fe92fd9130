d7273c0fddeffffc79ed90260087aa66
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.testUtils = void 0;
// Optimized test setup for Guardian Grove project
const dotenv_1 = require("dotenv");
// Load test environment variables from .env.test
(0, dotenv_1.config)({ path: '.env.test' });
// PERFORMANCE OPTIMIZATION: Reduce timeout for faster feedback
jest.setTimeout(5000); // Reduced from 10000ms
// Set test environment
process.env.NODE_ENV = 'test';
// OPTIMIZATION: Set all required environment variables upfront
const requiredEnvVars = {
    JWT_SECRET: 'test-jwt-secret-fallback',
    EMAIL_USERNAME: 'test@guardiangrove.com',
    EMAIL_PASSWORD: 'test-password',
    MONGO_URI: 'mongodb://localhost:27017/guardian_grove_test',
    PORT: '3001',
    // Add other required vars to avoid runtime checks
    CLOUDINARY_CLOUD_NAME: 'test_cloud',
    CLOUDINARY_API_KEY: 'test_key',
    CLOUDINARY_API_SECRET: 'test_secret',
    OPENAI_API_KEY: 'test_openai_key',
    ELEVEN_LABS_API_KEY: 'test_eleven_key',
    VOICE_ID: 'test_voice_id'
};
// Set all env vars at once
Object.entries(requiredEnvVars).forEach(([key, value]) => {
    if (!process.env[key]) {
        process.env[key] = value;
    }
});
// OPTIMIZATION: Create reusable mock factories with pre-computed values
const createReusableMocks = () => {
    // Pre-generate common IDs to avoid recreation
    const commonIds = {
        user: '507f1f77bcf86cd799439011',
        family: '507f1f77bcf86cd799439012',
        adventure: '507f1f77bcf86cd799439015',
        challenge: '507f1f77bcf86cd799439016',
        item: '507f1f77bcf86cd799439017',
        note: '507f1f77bcf86cd799439018',
        notification: '507f1f77bcf86cd799439019'
    };
    // Pre-create common dates
    const commonDates = {
        past: new Date('2024-01-01'),
        recent: new Date('2024-06-01'),
        now: new Date()
    };
    return {
        ids: commonIds,
        dates: commonDates,
        // Optimized mock creators with minimal object creation
        mockRequest: (overrides = {}) => (Object.assign({ body: {}, params: {}, query: {}, headers: {}, user: null }, overrides)),
        mockResponse: () => {
            const res = {};
            res.status = jest.fn().mockReturnValue(res);
            res.json = jest.fn().mockReturnValue(res);
            res.send = jest.fn().mockReturnValue(res);
            res.cookie = jest.fn().mockReturnValue(res);
            res.clearCookie = jest.fn().mockReturnValue(res);
            res.redirect = jest.fn().mockReturnValue(res);
            return res;
        },
        // Base user template - clone and modify as needed
        baseUser: {
            _id: commonIds.user,
            name: 'Test User',
            email: 'test@example.com',
            isTempPassword: false,
            passwordChangedAt: commonDates.past,
            password: 'hashedPassword123',
            birthday: new Date('1990-01-01'),
            dailyMessage: 'You are shiningðŸ’«!',
            gender: 'male',
            role: 'parent',
            avatar: '/assets/images/avatars/parent/avatar1.png',
            interests: ['reading', 'sports'],
            memberSince: commonDates.past,
            currentLocation: 'not specified',
            stars: 100,
            coins: 50,
            nbOfTasksCompleted: 5,
            rankInFamily: 1,
            familyId: commonIds.family,
            adventures: [],
            achievements: [],
            purchasedItems: [],
            notifications: [],
            notes: [],
            goals: [],
            books: [],
            drawings: [],
            colorings: [],
            personalStories: [],
            save: jest.fn().mockResolvedValue(true),
            toJSON: jest.fn(),
            equals: jest.fn((id) => id === commonIds.user),
        },
        // Quick user creator using spread
        createUser: (overrides = {}) => (Object.assign(Object.assign({}, createReusableMocks().baseUser), overrides))
    };
};
// Create singleton instance
const mocks = createReusableMocks();
// Global cleanup - optimized to avoid unnecessary work
afterEach(() => {
    // Only clear mocks that were actually used
    jest.clearAllMocks();
    // OPTIMIZATION: Don't clear timers unless needed
    // jest.clearAllTimers(); // Only add if you use timers
});
// OPTIMIZATION: Global beforeAll for one-time setup
beforeAll(() => {
    // Any expensive one-time setup goes here
    console.log('Test suite starting...');
});
// OPTIMIZATION: Global afterAll for cleanup
afterAll(() => {
    // Clean up any global resources
    console.log('Test suite completed');
});
// Export optimized test utilities
exports.testUtils = Object.assign(Object.assign({}, mocks), { 
    // Legacy compatibility - these create new objects each time (slower)
    createMockRequest: mocks.mockRequest, createMockResponse: mocks.mockResponse, createMockUser: mocks.createUser, 
    // Fast mock creators using base templates
    createMockFamily: (overrides = {}) => (Object.assign({ _id: mocks.ids.family, email: 'family@example.com', members: [], totalStars: 500, familyName: 'Test Family', save: jest.fn().mockResolvedValue(true) }, overrides)), createMockAdventure: (overrides = {}) => (Object.assign({ _id: mocks.ids.adventure, title: 'Test Adventure', description: 'A test adventure', challenges: [{
                _id: mocks.ids.challenge,
                title: 'Test Challenge',
                description: 'A test challenge',
                starsReward: 10,
                coinsReward: 5,
                equals: jest.fn((id) => id === mocks.ids.challenge)
            }], starsReward: 100, coinsReward: 50, difficulty: 'easy', category: 'learning' }, overrides)), 
    // Common test data
    validObjectId: mocks.ids.user, invalidObjectId: 'invalid-id-format', 
    // Helper to create multiple users quickly
    createUsers: (count, baseOverrides = {}) => Array.from({ length: count }, (_, i) => mocks.createUser(Object.assign({ _id: `507f1f77bcf86cd79943901${i}`, email: `test${i}@example.com`, name: `Test User ${i}` }, baseOverrides))), 
    // Quick test data generators
    createMockAdventureProgress: (overrides = {}) => (Object.assign({ adventureId: mocks.ids.adventure, challenges: [], isAdventureCompleted: false, status: 'in-progress', progress: 0, starsReward: 10, coinsReward: 5 }, overrides)), createMockChallengeProgress: (overrides = {}) => (Object.assign({ challengeId: mocks.ids.challenge, isCompleted: false, completedAt: undefined }, overrides)), createMockPurchasedItem: (overrides = {}) => (Object.assign({ itemId: mocks.ids.item, purchasedAt: mocks.dates.now }, overrides)), createMockNote: (overrides = {}) => (Object.assign({ _id: mocks.ids.note, title: 'Test Note', content: 'This is a test note content', type: 'personal', isPinned: false, createdAt: mocks.dates.now, updatedAt: mocks.dates.now }, overrides)), createMockNotification: (overrides = {}) => (Object.assign({ _id: mocks.ids.notification, title: 'Test Notification', message: 'This is a test notification', type: 'info', isRead: false, createdAt: mocks.dates.now }, overrides)) });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVU0VSXFxEZXNrdG9wXFxndWFyZGlhbi1ncm92ZVxcZ3VhcmRpYW4tZ3JvdmUtYmFja2VuZFxcdGVzdHNcXHNldHVwLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLGtEQUFrRDtBQUNsRCxtQ0FBZ0M7QUFFaEMsaURBQWlEO0FBQ2pELElBQUEsZUFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFFOUIsK0RBQStEO0FBQy9ELElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyx1QkFBdUI7QUFFOUMsdUJBQXVCO0FBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztBQUU5QiwrREFBK0Q7QUFDL0QsTUFBTSxlQUFlLEdBQUc7SUFDcEIsVUFBVSxFQUFFLDBCQUEwQjtJQUN0QyxjQUFjLEVBQUUsd0JBQXdCO0lBQ3hDLGNBQWMsRUFBRSxlQUFlO0lBQy9CLFNBQVMsRUFBRSwrQ0FBK0M7SUFDMUQsSUFBSSxFQUFFLE1BQU07SUFDWixrREFBa0Q7SUFDbEQscUJBQXFCLEVBQUUsWUFBWTtJQUNuQyxrQkFBa0IsRUFBRSxVQUFVO0lBQzlCLHFCQUFxQixFQUFFLGFBQWE7SUFDcEMsY0FBYyxFQUFFLGlCQUFpQjtJQUNqQyxtQkFBbUIsRUFBRSxpQkFBaUI7SUFDdEMsUUFBUSxFQUFFLGVBQWU7Q0FDNUIsQ0FBQztBQUVGLDJCQUEyQjtBQUMzQixNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUU7SUFDckQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUM3QixDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSCx3RUFBd0U7QUFDeEUsTUFBTSxtQkFB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Q2hDLEdBQUcsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksRUFDbkIsS0FBSyxFQUFFLFdBQVcsRUFDbEIsT0FBTyxFQUFFLDZCQUE2QixFQUN0QyxJQUFJLEVBQUUsVUFBVSxFQUNoQixRQUFRLEVBQUUsS0FBSyxFQUNmLFNBQVMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFDMUIsU0FBUyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUN2QixTQUFTLEVBQ2QsRUFFRixzQkFBc0IsRUFBRSxDQUFDLFNBQVMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLGlCQUN4QyxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQzNCLEtBQUssRUFBRSxtQkFBbUIsRUFDMUIsT0FBTyxFQUFFLDZCQUE2QixFQUN0QyxJQUFJLEVBQUUsTUFBTSxFQUNaLE1BQU0sRUFBRSxLQUFLLEVBQ2IsU0FBUyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUN2QixTQUFTLEVBQ2QsSUFDSiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVTRVJcXERlc2t0b3BcXGd1YXJkaWFuLWdyb3ZlXFxndWFyZGlhbi1ncm92ZS1iYWNrZW5kXFx0ZXN0c1xcc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gT3B0aW1pemVkIHRlc3Qgc2V0dXAgZm9yIEd1YXJkaWFuIEdyb3ZlIHByb2plY3RcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnZG90ZW52JztcclxuXHJcbi8vIExvYWQgdGVzdCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52LnRlc3RcclxuY29uZmlnKHsgcGF0aDogJy5lbnYudGVzdCcgfSk7XHJcblxyXG4vLyBQRVJGT1JNQU5DRSBPUFRJTUlaQVRJT046IFJlZHVjZSB0aW1lb3V0IGZvciBmYXN0ZXIgZmVlZGJhY2tcclxuamVzdC5zZXRUaW1lb3V0KDUwMDApOyAvLyBSZWR1Y2VkIGZyb20gMTAwMDBtc1xyXG5cclxuLy8gU2V0IHRlc3QgZW52aXJvbm1lbnRcclxucHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAndGVzdCc7XHJcblxyXG4vLyBPUFRJTUlaQVRJT046IFNldCBhbGwgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIHVwZnJvbnRcclxuY29uc3QgcmVxdWlyZWRFbnZWYXJzID0ge1xyXG4gICAgSldUX1NFQ1JFVDogJ3Rlc3Qtand0LXNlY3JldC1mYWxsYmFjaycsXHJcbiAgICBFTUFJTF9VU0VSTkFNRTogJ3Rlc3RAZ3VhcmRpYW5ncm92ZS5jb20nLFxyXG4gICAgRU1BSUxfUEFTU1dPUkQ6ICd0ZXN0LXBhc3N3b3JkJyxcclxuICAgIE1PTkdPX1VSSTogJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvZ3VhcmRpYW5fZ3JvdmVfdGVzdCcsXHJcbiAgICBQT1JUOiAnMzAwMScsXHJcbiAgICAvLyBBZGQgb3RoZXIgcmVxdWlyZWQgdmFycyB0byBhdm9pZCBydW50aW1lIGNoZWNrc1xyXG4gICAgQ0xPVURJTkFSWV9DTE9VRF9OQU1FOiAndGVzdF9jbG91ZCcsXHJcbiAgICBDTE9VRElOQVJZX0FQSV9LRVk6ICd0ZXN0X2tleScsXHJcbiAgICBDTE9VRElOQVJZX0FQSV9TRUNSRVQ6ICd0ZXN0X3NlY3JldCcsXHJcbiAgICBPUEVOQUlfQVBJX0tFWTogJ3Rlc3Rfb3BlbmFpX2tleScsXHJcbiAgICBFTEVWRU5fTEFCU19BUElfS0VZOiAndGVzdF9lbGV2ZW5fa2V5JyxcclxuICAgIFZPSUNFX0lEOiAndGVzdF92b2ljZV9pZCdcclxufTtcclxuXHJcbi8vIFNldCBhbGwgZW52IHZhcnMgYXQgb25jZVxyXG5PYmplY3QuZW50cmllcyhyZXF1aXJlZEVudlZhcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgaWYgKCFwcm9jZXNzLmVudltrZXldKSB7XHJcbiAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIE9QVElNSVpBVElPTjogQ3JlYXRlIHJldXNhYmxlIG1vY2sgZmFjdG9yaWVzIHdpdGggcHJlLWNvbXB1dGVkIHZhbHVlc1xyXG5jb25zdCBjcmVhdGVSZXVzYWJsZU1vY2tzID0gKCkgPT4ge1xyXG4gICAgLy8gUHJlLWdlbmVyYXRlIGNvbW1vbiBJRHMgdG8gYXZvaWQgcmVjcmVhdGlvblxyXG4gICAgY29uc3QgY29tbW9uSWRzID0ge1xyXG4gICAgICAgIHVzZXI6ICc1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEnLFxyXG4gICAgICAgIGZhbWlseTogJzUwN2YxZjc3YmNmODZjZDc5OTQzOTAxMicsXHJcbiAgICAgICAgYWR2ZW50dXJlOiAnNTA3ZjFmNzdiY2Y4NmNkNzk5NDM5MDE1JyxcclxuICAgICAgICBjaGFsbGVuZ2U6ICc1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTYnLFxyXG4gICAgICAgIGl0ZW06ICc1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTcnLFxyXG4gICAgICAgIG5vdGU6ICc1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTgnLFxyXG4gICAgICAgIG5vdGlmaWNhdGlvbjogJzUwN2YxZjc3YmNmODZjZDc5OTQzOTAxOSdcclxuICAgIH07XHJcblxyXG4gICAgLy8gUHJlLWNyZWF0ZSBjb21tb24gZGF0ZXNcclxuICAgIGNvbnN0IGNvbW1vbkRhdGVzID0ge1xyXG4gICAgICAgIHBhc3Q6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXHJcbiAgICAgICAgcmVjZW50OiBuZXcgRGF0ZSgnMjAyNC0wNi0wMScpLFxyXG4gICAgICAgIG5vdzogbmV3IERhdGUoKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkczogY29tbW9uSWRzLFxyXG4gICAgICAgIGRhdGVzOiBjb21tb25EYXRlcyxcclxuICAgICAgICBcclxuICAgICAgICAvLyBPcHRpbWl6ZWQgbW9jayBjcmVhdG9ycyB3aXRoIG1pbmltYWwgb2JqZWN0IGNyZWF0aW9uXHJcbiAgICAgICAgbW9ja1JlcXVlc3Q6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcclxuICAgICAgICAgICAgYm9keToge30sXHJcbiAgICAgICAgICAgIHBhcmFtczoge30sXHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7fSxcclxuICAgICAgICAgICAgaGVhZGVyczoge30sXHJcbiAgICAgICAgICAgIHVzZXI6IG51bGwsXHJcbiAgICAgICAgICAgIC4uLm92ZXJyaWRlcyxcclxuICAgICAgICB9KSxcclxuICAgICAgICBcclxuICAgICAgICBtb2NrUmVzcG9uc2U6ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzOiBhbnkgPSB7fTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUocmVzKTtcclxuICAgICAgICAgICAgcmVzLmpzb24gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHJlcyk7XHJcbiAgICAgICAgICAgIHJlcy5zZW5kID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShyZXMpO1xyXG4gICAgICAgICAgICByZXMuY29va2llID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShyZXMpO1xyXG4gICAgICAgICAgICByZXMuY2xlYXJDb29raWUgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHJlcyk7XHJcbiAgICAgICAgICAgIHJlcy5yZWRpcmVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUocmVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvLyBCYXNlIHVzZXIgdGVtcGxhdGUgLSBjbG9uZSBhbmQgbW9kaWZ5IGFzIG5lZWRlZFxyXG4gICAgICAgIGJhc2VVc2VyOiB7XHJcbiAgICAgICAgICAgIF9pZDogY29tbW9uSWRzLnVzZXIsXHJcbiAgICAgICAgICAgIG5hbWU6ICdUZXN0IFVzZXInLFxyXG4gICAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxyXG4gICAgICAgICAgICBpc1RlbXBQYXNzd29yZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkQ2hhbmdlZEF0OiBjb21tb25EYXRlcy5wYXN0LFxyXG4gICAgICAgICAgICBwYXNzd29yZDogJ2hhc2hlZFBhc3N3b3JkMTIzJyxcclxuICAgICAgICAgICAgYmlydGhkYXk6IG5ldyBEYXRlKCcxOTkwLTAxLTAxJyksXHJcbiAgICAgICAgICAgIGRhaWx5TWVzc2FnZTogJ1lvdSBhcmUgc2hpbmluZ/CfkqshJyxcclxuICAgICAgICAgICAgZ2VuZGVyOiAnbWFsZScsXHJcbiAgICAgICAgICAgIHJvbGU6ICdwYXJlbnQnLFxyXG4gICAgICAgICAgICBhdmF0YXI6ICcvYXNzZXRzL2ltYWdlcy9hdmF0YXJzL3BhcmVudC9hdmF0YXIxLnBuZycsXHJcbiAgICAgICAgICAgIGludGVyZXN0czogWydyZWFkaW5nJywgJ3Nwb3J0cyddLFxyXG4gICAgICAgICAgICBtZW1iZXJTaW5jZTogY29tbW9uRGF0ZXMucGFzdCxcclxuICAgICAgICAgICAgY3VycmVudExvY2F0aW9uOiAnbm90IHNwZWNpZmllZCcsXHJcbiAgICAgICAgICAgIHN0YXJzOiAxMDAsXHJcbiAgICAgICAgICAgIGNvaW5zOiA1MCxcclxuICAgICAgICAgICAgbmJPZlRhc2tzQ29tcGxldGVkOiA1LFxyXG4gICAgICAgICAgICByYW5rSW5GYW1pbHk6IDEsXHJcbiAgICAgICAgICAgIGZhbWlseUlkOiBjb21tb25JZHMuZmFtaWx5LFxyXG4gICAgICAgICAgICBhZHZlbnR1cmVzOiBbXSxcclxuICAgICAgICAgICAgYWNoaWV2ZW1lbnRzOiBbXSxcclxuICAgICAgICAgICAgcHVyY2hhc2VkSXRlbXM6IFtdLFxyXG4gICAgICAgICAgICBub3RpZmljYXRpb25zOiBbXSxcclxuICAgICAgICAgICAgbm90ZXM6IFtdLFxyXG4gICAgICAgICAgICBnb2FsczogW10sXHJcbiAgICAgICAgICAgIGJvb2tzOiBbXSxcclxuICAgICAgICAgICAgZHJhd2luZ3M6IFtdLFxyXG4gICAgICAgICAgICBjb2xvcmluZ3M6IFtdLFxyXG4gICAgICAgICAgICBwZXJzb25hbFN0b3JpZXM6IFtdLFxyXG4gICAgICAgICAgICBzYXZlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXHJcbiAgICAgICAgICAgIHRvSlNPTjogamVzdC5mbigpLFxyXG4gICAgICAgICAgICBlcXVhbHM6IGplc3QuZm4oKGlkOiBhbnkpID0+IGlkID09PSBjb21tb25JZHMudXNlciksXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLy8gUXVpY2sgdXNlciBjcmVhdG9yIHVzaW5nIHNwcmVhZFxyXG4gICAgICAgIGNyZWF0ZVVzZXI6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcclxuICAgICAgICAgICAgLi4uY3JlYXRlUmV1c2FibGVNb2NrcygpLmJhc2VVc2VyLFxyXG4gICAgICAgICAgICAuLi5vdmVycmlkZXNcclxuICAgICAgICB9KVxyXG4gICAgfTtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBzaW5nbGV0b24gaW5zdGFuY2VcclxuY29uc3QgbW9ja3MgPSBjcmVhdGVSZXVzYWJsZU1vY2tzKCk7XHJcblxyXG4vLyBHbG9iYWwgY2xlYW51cCAtIG9wdGltaXplZCB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3b3JrXHJcbmFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICAvLyBPbmx5IGNsZWFyIG1vY2tzIHRoYXQgd2VyZSBhY3R1YWxseSB1c2VkXHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIFxyXG4gICAgLy8gT1BUSU1JWkFUSU9OOiBEb24ndCBjbGVhciB0aW1lcnMgdW5sZXNzIG5lZWRlZFxyXG4gICAgLy8gamVzdC5jbGVhckFsbFRpbWVycygpOyAvLyBPbmx5IGFkZCBpZiB5b3UgdXNlIHRpbWVyc1xyXG59KTtcclxuXHJcbi8vIE9QVElNSVpBVElPTjogR2xvYmFsIGJlZm9yZUFsbCBmb3Igb25lLXRpbWUgc2V0dXBcclxuYmVmb3JlQWxsKCgpID0+IHtcclxuICAgIC8vIEFueSBleHBlbnNpdmUgb25lLXRpbWUgc2V0dXAgZ29lcyBoZXJlXHJcbiAgICBjb25zb2xlLmxvZygnVGVzdCBzdWl0ZSBzdGFydGluZy4uLicpO1xyXG59KTtcclxuXHJcbi8vIE9QVElNSVpBVElPTjogR2xvYmFsIGFmdGVyQWxsIGZvciBjbGVhbnVwXHJcbmFmdGVyQWxsKCgpID0+IHtcclxuICAgIC8vIENsZWFuIHVwIGFueSBnbG9iYWwgcmVzb3VyY2VzXHJcbiAgICBjb25zb2xlLmxvZygnVGVzdCBzdWl0ZSBjb21wbGV0ZWQnKTtcclxufSk7XHJcblxyXG4vLyBFeHBvcnQgb3B0aW1pemVkIHRlc3QgdXRpbGl0aWVzXHJcbmV4cG9ydCBjb25zdCB0ZXN0VXRpbHMgPSB7XHJcbiAgICAvLyBSZS1leHBvcnQgdGhlIG9wdGltaXplZCBtb2Nrc1xyXG4gICAgLi4ubW9ja3MsXHJcbiAgICBcclxuICAgIC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5IC0gdGhlc2UgY3JlYXRlIG5ldyBvYmplY3RzIGVhY2ggdGltZSAoc2xvd2VyKVxyXG4gICAgY3JlYXRlTW9ja1JlcXVlc3Q6IG1vY2tzLm1vY2tSZXF1ZXN0LFxyXG4gICAgY3JlYXRlTW9ja1Jlc3BvbnNlOiBtb2Nrcy5tb2NrUmVzcG9uc2UsXHJcbiAgICBjcmVhdGVNb2NrVXNlcjogbW9ja3MuY3JlYXRlVXNlcixcclxuICAgIFxyXG4gICAgLy8gRmFzdCBtb2NrIGNyZWF0b3JzIHVzaW5nIGJhc2UgdGVtcGxhdGVzXHJcbiAgICBjcmVhdGVNb2NrRmFtaWx5OiAob3ZlcnJpZGVzID0ge30pID0+ICh7XHJcbiAgICAgICAgX2lkOiBtb2Nrcy5pZHMuZmFtaWx5LFxyXG4gICAgICAgIGVtYWlsOiAnZmFtaWx5QGV4YW1wbGUuY29tJyxcclxuICAgICAgICBtZW1iZXJzOiBbXSxcclxuICAgICAgICB0b3RhbFN0YXJzOiA1MDAsXHJcbiAgICAgICAgZmFtaWx5TmFtZTogJ1Rlc3QgRmFtaWx5JyxcclxuICAgICAgICBzYXZlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXHJcbiAgICAgICAgLi4ub3ZlcnJpZGVzXHJcbiAgICB9KSxcclxuXHJcbiAgICBjcmVhdGVNb2NrQWR2ZW50dXJlOiAob3ZlcnJpZGVzID0ge30pID0+ICh7XHJcbiAgICAgICAgX2lkOiBtb2Nrcy5pZHMuYWR2ZW50dXJlLFxyXG4gICAgICAgIHRpdGxlOiAnVGVzdCBBZHZlbnR1cmUnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQSB0ZXN0IGFkdmVudHVyZScsXHJcbiAgICAgICAgY2hhbGxlbmdlczogW3tcclxuICAgICAgICAgICAgX2lkOiBtb2Nrcy5pZHMuY2hhbGxlbmdlLFxyXG4gICAgICAgICAgICB0aXRsZTogJ1Rlc3QgQ2hhbGxlbmdlJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgY2hhbGxlbmdlJyxcclxuICAgICAgICAgICAgc3RhcnNSZXdhcmQ6IDEwLFxyXG4gICAgICAgICAgICBjb2luc1Jld2FyZDogNSxcclxuICAgICAgICAgICAgZXF1YWxzOiBqZXN0LmZuKChpZDogYW55KSA9PiBpZCA9PT0gbW9ja3MuaWRzLmNoYWxsZW5nZSlcclxuICAgICAgICB9XSxcclxuICAgICAgICBzdGFyc1Jld2FyZDogMTAwLFxyXG4gICAgICAgIGNvaW5zUmV3YXJkOiA1MCxcclxuICAgICAgICBkaWZmaWN1bHR5OiAnZWFzeScsXHJcbiAgICAgICAgY2F0ZWdvcnk6ICdsZWFybmluZycsXHJcbiAgICAgICAgLi4ub3ZlcnJpZGVzXHJcbiAgICB9KSxcclxuXHJcbiAgICAvLyBDb21tb24gdGVzdCBkYXRhXHJcbiAgICB2YWxpZE9iamVjdElkOiBtb2Nrcy5pZHMudXNlcixcclxuICAgIGludmFsaWRPYmplY3RJZDogJ2ludmFsaWQtaWQtZm9ybWF0JyxcclxuXHJcbiAgICAvLyBIZWxwZXIgdG8gY3JlYXRlIG11bHRpcGxlIHVzZXJzIHF1aWNrbHlcclxuICAgIGNyZWF0ZVVzZXJzOiAoY291bnQ6IG51bWJlciwgYmFzZU92ZXJyaWRlcyA9IHt9KSA9PiBcclxuICAgICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb3VudCB9LCAoXywgaSkgPT4gbW9ja3MuY3JlYXRlVXNlcih7XHJcbiAgICAgICAgICAgIF9pZDogYDUwN2YxZjc3YmNmODZjZDc5OTQzOTAxJHtpfWAsXHJcbiAgICAgICAgICAgIGVtYWlsOiBgdGVzdCR7aX1AZXhhbXBsZS5jb21gLFxyXG4gICAgICAgICAgICBuYW1lOiBgVGVzdCBVc2VyICR7aX1gLFxyXG4gICAgICAgICAgICAuLi5iYXNlT3ZlcnJpZGVzXHJcbiAgICAgICAgfSkpLFxyXG5cclxuICAgIC8vIFF1aWNrIHRlc3QgZGF0YSBnZW5lcmF0b3JzXHJcbiAgICBjcmVhdGVNb2NrQWR2ZW50dXJlUHJvZ3Jlc3M6IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcclxuICAgICAgICBhZHZlbnR1cmVJZDogbW9ja3MuaWRzLmFkdmVudHVyZSxcclxuICAgICAgICBjaGFsbGVuZ2VzOiBbXSxcclxuICAgICAgICBpc0FkdmVudHVyZUNvbXBsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgc3RhdHVzOiAnaW4tcHJvZ3Jlc3MnLFxyXG4gICAgICAgIHByb2dyZXNzOiAwLFxyXG4gICAgICAgIHN0YXJzUmV3YXJkOiAxMCxcclxuICAgICAgICBjb2luc1Jld2FyZDogNSxcclxuICAgICAgICAuLi5vdmVycmlkZXNcclxuICAgIH0pLFxyXG5cclxuICAgIGNyZWF0ZU1vY2tDaGFsbGVuZ2VQcm9ncmVzczogKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xyXG4gICAgICAgIGNoYWxsZW5nZUlkOiBtb2Nrcy5pZHMuY2hhbGxlbmdlLFxyXG4gICAgICAgIGlzQ29tcGxldGVkOiBmYWxzZSxcclxuICAgICAgICBjb21wbGV0ZWRBdDogdW5kZWZpbmVkLFxyXG4gICAgICAgIC4uLm92ZXJyaWRlc1xyXG4gICAgfSksXHJcblxyXG4gICAgY3JlYXRlTW9ja1B1cmNoYXNlZEl0ZW06IChvdmVycmlkZXMgPSB7fSkgPT4gKHtcclxuICAgICAgICBpdGVtSWQ6IG1vY2tzLmlkcy5pdGVtLFxyXG4gICAgICAgIHB1cmNoYXNlZEF0OiBtb2Nrcy5kYXRlcy5ub3csXHJcbiAgICAgICAgLi4ub3ZlcnJpZGVzXHJcbiAgICB9KSxcclxuXHJcbiAgICBjcmVhdGVNb2NrTm90ZTogKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xyXG4gICAgICAgIF9pZDogbW9ja3MuaWRzLm5vdGUsXHJcbiAgICAgICAgdGl0bGU6ICdUZXN0IE5vdGUnLFxyXG4gICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgdGVzdCBub3RlIGNvbnRlbnQnLFxyXG4gICAgICAgIHR5cGU6ICdwZXJzb25hbCcsXHJcbiAgICAgICAgaXNQaW5uZWQ6IGZhbHNlLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbW9ja3MuZGF0ZXMubm93LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbW9ja3MuZGF0ZXMubm93LFxyXG4gICAgICAgIC4uLm92ZXJyaWRlc1xyXG4gICAgfSksXHJcblxyXG4gICAgY3JlYXRlTW9ja05vdGlmaWNhdGlvbjogKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xyXG4gICAgICAgIF9pZDogbW9ja3MuaWRzLm5vdGlmaWNhdGlvbixcclxuICAgICAgICB0aXRsZTogJ1Rlc3QgTm90aWZpY2F0aW9uJyxcclxuICAgICAgICBtZXNzYWdlOiAnVGhpcyBpcyBhIHRlc3Qgbm90aWZpY2F0aW9uJyxcclxuICAgICAgICB0eXBlOiAnaW5mbycsXHJcbiAgICAgICAgaXNSZWFkOiBmYWxzZSxcclxuICAgICAgICBjcmVhdGVkQXQ6IG1vY2tzLmRhdGVzLm5vdyxcclxuICAgICAgICAuLi5vdmVycmlkZXNcclxuICAgIH0pXHJcbn07Il0sInZlcnNpb24iOjN9