{"version":3,"sources":["C:\\Users\\USER\\Desktop\\guardian-grove\\guardian-grove-backend\\src\\models\\user.model.ts"],"sourcesContent":["import { model, Schema, Types } from \"mongoose\";\r\nimport { IUser } from \"../interfaces/IUser\";\r\nimport { IAdventureProgress, IChallengeProgress } from \"../interfaces/IAdventureProgress\";\r\nimport { IUnlockedAchievement } from \"../interfaces/IUnlockedAchievement\";\r\nimport { IPurchasedItem } from \"../interfaces/IPurschasedItem\";\r\nimport { INotification } from \"../interfaces/INotification\";\r\nimport { INote } from \"../interfaces/INote\";\r\nimport { goalSchema } from \"./schemas/goal.schema\";\r\nimport { notificationSchema } from \"./schemas/notification.schema\";\r\nimport { unlockedAchievementSchema } from \"./schemas/unlockedAchievementSchema.schema\";\r\nimport { bookSchema } from \"./schemas/book.schema\";\r\nimport { drawingSchema } from \"./schemas/drawing.schema\";\r\nimport { coloringSchema } from \"./schemas/coloring.schema\";\r\nimport { storySchema } from \"./schemas/story.schema\";\r\n\r\nconst noteSchema: Schema = new Schema<INote>({\r\n    _id: { type: Schema.Types.ObjectId, auto: true },\r\n    title: { type: String, required: true },\r\n    content: { type: String, required: true },\r\n    type: { type: String, required: true, enum: ['personal', 'family'], default: 'personal' },\r\n    isPinned: {type: Boolean, default:false},\r\n    createdAt: { type: Date, default: Date.now },\r\n    updatedAt: { type: Date, default: Date.now }\r\n});\r\n\r\nconst purchasedItemSchema = new Schema<IPurchasedItem>({\r\n    itemId: { type: Schema.Types.ObjectId, ref: \"StoreItem\", required: true },\r\n    purchasedAt: { type: Date, default: Date.now },\r\n}, { _id: false });\r\n\r\nconst challengeProgressSchema = new Schema<IChallengeProgress>({\r\n    challengeId: { type: Schema.Types.ObjectId, required: true },\r\n    isCompleted: { type: Boolean, default: false },\r\n    completedAt: { type: Date }\r\n    \r\n}, { _id: false });\r\n\r\nconst adventureProgressSchema = new Schema<IAdventureProgress>({\r\n    adventureId: { type: Schema.Types.ObjectId, ref: 'Adventure', required: true },\r\n    challenges: { type: [challengeProgressSchema], default: [] },\r\n    isAdventureCompleted: { type: Boolean, default: false },\r\n    status: { type: String, enum: ['in-progress', 'completed'] },\r\n    progress: { type: Number, default: 0 },\r\n    starsReward: { type: Number, default: 10 },\r\n    coinsReward: { type: Number, default: 5 },\r\n} , { _id: false });\r\n\r\nconst userSchema = new Schema<IUser>({\r\n    _id: { type: Schema.Types.ObjectId, auto: true },\r\n    name: {type: String, required: true },\r\n    email: {type: String, required: [true, \"Email is required\"],  match: [/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/, \"Email is invalid\",]},\r\n    isTempPassword: { type: Boolean, default: false },\r\n    passwordChangedAt: { type: Date },\r\n    password: {type: String, required: true},\r\n    birthday:{type: Date, required: true},\r\n    dailyMessage: {type: String, required: true, default: \"You are shiningðŸ’«!\"},\r\n    gender:{type: String, enum: ['female', 'male'], required: true},\r\n    role: {type: String, enum: ['parent', 'child', 'admin'], required: true},\r\n    avatar: {type: String, required: true, default:\"/assets/images/avatars/parent/avatar1.png\"},\r\n    interests: {type: [String], required: true, default: []},\r\n    memberSince: {type: Date, required: true, default: Date.now},\r\n    currentLocation:{type: String, required: true, default: \"not specified\"},\r\n    stars: {type: Number, required: true, default: 0},\r\n    coins: {type: Number, required: true, default: 0},\r\n    nbOfTasksCompleted: {type: Number, required: true, default: 0},\r\n    rankInFamily: {type: Number, required: true, default: 0},\r\n    familyId: { type: Types.ObjectId, ref: \"Family\", default: null },\r\n    adventures: { type: [adventureProgressSchema], default: [] },\r\n    achievements: { type: [unlockedAchievementSchema], default: [] },\r\n    purchasedItems: { type: [purchasedItemSchema], default: [] },\r\n    notifications: { type: [notificationSchema], default: [] },\r\n    notes: { type: [noteSchema], default: [] },\r\n    goals: { type: [goalSchema], default: [] },\r\n    books: { type: [bookSchema], default: [] }, \r\n    drawings: { type: [drawingSchema], default: [] }, \r\n    colorings: { type: [coloringSchema], default: [] }, \r\n    personalStories: { type: [storySchema], default: [] },\r\n});\r\n\r\nuserSchema.index({ name: 1, email: 1 }, { unique: true });\r\n\r\nexport const User = model<IUser>(\"User\", userSchema);"],"names":["User","noteSchema","Schema","_id","type","Types","ObjectId","auto","title","String","required","content","enum","default","isPinned","Boolean","createdAt","Date","now","updatedAt","purchasedItemSchema","itemId","ref","purchasedAt","challengeProgressSchema","challengeId","isCompleted","completedAt","adventureProgressSchema","adventureId","challenges","isAdventureCompleted","status","progress","Number","starsReward","coinsReward","userSchema","name","email","match","isTempPassword","passwordChangedAt","password","birthday","dailyMessage","gender","role","avatar","interests","memberSince","currentLocation","stars","coins","nbOfTasksCompleted","rankInFamily","familyId","adventures","achievements","unlockedAchievementSchema","purchasedItems","notifications","notificationSchema","notes","goals","goalSchema","books","bookSchema","drawings","drawingSchema","colorings","coloringSchema","personalStories","storySchema","index","unique","model"],"mappings":"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"}