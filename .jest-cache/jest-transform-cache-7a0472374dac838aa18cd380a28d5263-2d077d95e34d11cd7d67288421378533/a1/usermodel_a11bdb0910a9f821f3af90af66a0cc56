df32456cc49d5ae142067adf3dc36776
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.User = void 0;
const mongoose_1 = require("mongoose");
const goal_schema_1 = require("./schemas/goal.schema");
const notification_schema_1 = require("./schemas/notification.schema");
const unlockedAchievementSchema_schema_1 = require("./schemas/unlockedAchievementSchema.schema");
const book_schema_1 = require("./schemas/book.schema");
const drawing_schema_1 = require("./schemas/drawing.schema");
const coloring_schema_1 = require("./schemas/coloring.schema");
const story_schema_1 = require("./schemas/story.schema");
const noteSchema = new mongoose_1.Schema({
    _id: { type: mongoose_1.Schema.Types.ObjectId, auto: true },
    title: { type: String, required: true },
    content: { type: String, required: true },
    type: { type: String, required: true, enum: ['personal', 'family'], default: 'personal' },
    isPinned: { type: Boolean, default: false },
    createdAt: { type: Date, default: Date.now },
    updatedAt: { type: Date, default: Date.now }
});
const purchasedItemSchema = new mongoose_1.Schema({
    itemId: { type: mongoose_1.Schema.Types.ObjectId, ref: "StoreItem", required: true },
    purchasedAt: { type: Date, default: Date.now },
}, { _id: false });
const challengeProgressSchema = new mongoose_1.Schema({
    challengeId: { type: mongoose_1.Schema.Types.ObjectId, required: true },
    isCompleted: { type: Boolean, default: false },
    completedAt: { type: Date }
}, { _id: false });
const adventureProgressSchema = new mongoose_1.Schema({
    adventureId: { type: mongoose_1.Schema.Types.ObjectId, ref: 'Adventure', required: true },
    challenges: { type: [challengeProgressSchema], default: [] },
    isAdventureCompleted: { type: Boolean, default: false },
    status: { type: String, enum: ['in-progress', 'completed'] },
    progress: { type: Number, default: 0 },
    starsReward: { type: Number, default: 10 },
    coinsReward: { type: Number, default: 5 },
}, { _id: false });
const userSchema = new mongoose_1.Schema({
    _id: { type: mongoose_1.Schema.Types.ObjectId, auto: true },
    name: { type: String, required: true },
    email: { type: String, required: [true, "Email is required"], match: [/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/, "Email is invalid",] },
    isTempPassword: { type: Boolean, default: false },
    passwordChangedAt: { type: Date },
    password: { type: String, required: true },
    birthday: { type: Date, required: true },
    dailyMessage: { type: String, required: true, default: "You are shiningðŸ’«!" },
    gender: { type: String, enum: ['female', 'male'], required: true },
    role: { type: String, enum: ['parent', 'child', 'admin'], required: true },
    avatar: { type: String, required: true, default: "/assets/images/avatars/parent/avatar1.png" },
    interests: { type: [String], required: true, default: [] },
    memberSince: { type: Date, required: true, default: Date.now },
    currentLocation: { type: String, required: true, default: "not specified" },
    stars: { type: Number, required: true, default: 0 },
    coins: { type: Number, required: true, default: 0 },
    nbOfTasksCompleted: { type: Number, required: true, default: 0 },
    rankInFamily: { type: Number, required: true, default: 0 },
    familyId: { type: mongoose_1.Types.ObjectId, ref: "Family", default: null },
    adventures: { type: [adventureProgressSchema], default: [] },
    achievements: { type: [unlockedAchievementSchema_schema_1.unlockedAchievementSchema], default: [] },
    purchasedItems: { type: [purchasedItemSchema], default: [] },
    notifications: { type: [notification_schema_1.notificationSchema], default: [] },
    notes: { type: [noteSchema], default: [] },
    goals: { type: [goal_schema_1.goalSchema], default: [] },
    books: { type: [book_schema_1.bookSchema], default: [] },
    drawings: { type: [drawing_schema_1.drawingSchema], default: [] },
    colorings: { type: [coloring_schema_1.coloringSchema], default: [] },
    personalStories: { type: [story_schema_1.storySchema], default: [] },
});
userSchema.index({ name: 1, email: 1 }, { unique: true });
exports.User = (0, mongoose_1.model)("User", userSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVU0VSXFxEZXNrdG9wXFxndWFyZGlhbi1ncm92ZVxcZ3VhcmRpYW4tZ3JvdmUtYmFja2VuZFxcc3JjXFxtb2RlbHNcXHVzZXIubW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsdUNBQWdEO0FBT2hELHVEQUFtRDtBQUNuRCx1RUFBbUU7QUFDbkUsaUdBQXVGO0FBQ3ZGLHVEQUFtRDtBQUNuRCw2REFBeUQ7QUFDekQsK0RBQTJEO0FBQzNELHlEQUFxRDtBQUVyRCxNQUFNLFVBQVUsR0FBVyxJQUFJLGlCQUFNLENBQVE7SUFDekMsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLGlCQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0lBQ2hELEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtJQUN2QyxPQUFPLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUU7SUFDekMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFO0lBQ3pGLFFBQVEsRUFBRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFDLEtBQUssRUFBQztJQUN4QyxTQUFTLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFO0lBQzVDLFNBQVMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7Q0FDL0MsQ0FBQyxDQUFDO0FBRUgsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLGlCQUFNLENBQWlCO0lBQ25ELE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRSxpQkFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVB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QUFFLElBQUksRUFBRSxDQUFDLDREQUF5QixDQUFDLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRTtJQUNoRSxjQUFjLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDNUQsYUFBYSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsd0NBQWtCLENBQUMsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFO0lBQzFELEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDMUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsd0JBQVUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDMUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsd0JBQVUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDMUMsUUFBUSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsOEJBQWEsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDaEQsU0FBUyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsZ0NBQWMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7SUFDbEQsZUFBZSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsMEJBQVcsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7Q0FDeEQsQ0FBQyxDQUFDO0FBRUgsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFFN0MsUUFBQSxJQUFJLEdBQUcsSUFBQSxnQkFBSyxFQUFRLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXFVTRVJcXERlc2t0b3BcXGd1YXJkaWFuLWdyb3ZlXFxndWFyZGlhbi1ncm92ZS1iYWNrZW5kXFxzcmNcXG1vZGVsc1xcdXNlci5tb2RlbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtb2RlbCwgU2NoZW1hLCBUeXBlcyB9IGZyb20gXCJtb25nb29zZVwiO1xyXG5pbXBvcnQgeyBJVXNlciB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL0lVc2VyXCI7XHJcbmltcG9ydCB7IElBZHZlbnR1cmVQcm9ncmVzcywgSUNoYWxsZW5nZVByb2dyZXNzIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvSUFkdmVudHVyZVByb2dyZXNzXCI7XHJcbmltcG9ydCB7IElVbmxvY2tlZEFjaGlldmVtZW50IH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvSVVubG9ja2VkQWNoaWV2ZW1lbnRcIjtcclxuaW1wb3J0IHsgSVB1cmNoYXNlZEl0ZW0gfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JUHVyc2NoYXNlZEl0ZW1cIjtcclxuaW1wb3J0IHsgSU5vdGlmaWNhdGlvbiB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL0lOb3RpZmljYXRpb25cIjtcclxuaW1wb3J0IHsgSU5vdGUgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JTm90ZVwiO1xyXG5pbXBvcnQgeyBnb2FsU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hcy9nb2FsLnNjaGVtYVwiO1xyXG5pbXBvcnQgeyBub3RpZmljYXRpb25TY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFzL25vdGlmaWNhdGlvbi5zY2hlbWFcIjtcclxuaW1wb3J0IHsgdW5sb2NrZWRBY2hpZXZlbWVudFNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYXMvdW5sb2NrZWRBY2hpZXZlbWVudFNjaGVtYS5zY2hlbWFcIjtcclxuaW1wb3J0IHsgYm9va1NjaGVtYSB9IGZyb20gXCIuL3NjaGVtYXMvYm9vay5zY2hlbWFcIjtcclxuaW1wb3J0IHsgZHJhd2luZ1NjaGVtYSB9IGZyb20gXCIuL3NjaGVtYXMvZHJhd2luZy5zY2hlbWFcIjtcclxuaW1wb3J0IHsgY29sb3JpbmdTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWFzL2NvbG9yaW5nLnNjaGVtYVwiO1xyXG5pbXBvcnQgeyBzdG9yeVNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYXMvc3Rvcnkuc2NoZW1hXCI7XHJcblxyXG5jb25zdCBub3RlU2NoZW1hOiBTY2hlbWEgPSBuZXcgU2NoZW1hPElOb3RlPih7XHJcbiAgICBfaWQ6IHsgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCBhdXRvOiB0cnVlIH0sXHJcbiAgICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBjb250ZW50OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgZW51bTogWydwZXJzb25hbCcsICdmYW1pbHknXSwgZGVmYXVsdDogJ3BlcnNvbmFsJyB9LFxyXG4gICAgaXNQaW5uZWQ6IHt0eXBlOiBCb29sZWFuLCBkZWZhdWx0OmZhbHNlfSxcclxuICAgIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG4gICAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cclxufSk7XHJcblxyXG5jb25zdCBwdXJjaGFzZWRJdGVtU2NoZW1hID0gbmV3IFNjaGVtYTxJUHVyY2hhc2VkSXRlbT4oe1xyXG4gICAgaXRlbUlkOiB7IHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlN0b3JlSXRlbVwiLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgcHVyY2hhc2VkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxufSwgeyBfaWQ6IGZhbHNlIH0pO1xyXG5cclxuY29uc3QgY2hhbGxlbmdlUHJvZ3Jlc3NTY2hlbWEgPSBuZXcgU2NoZW1hPElDaGFsbGVuZ2VQcm9ncmVzcz4oe1xyXG4gICAgY2hhbGxlbmdlSWQ6IHsgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgaXNDb21wbGV0ZWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICAgIGNvbXBsZXRlZEF0OiB7IHR5cGU6IERhdGUgfVxyXG4gICAgXHJcbn0sIHsgX2lkOiBmYWxzZSB9KTtcclxuXHJcbmNvbnN0IGFkdmVudHVyZVByb2dyZXNzU2NoZW1hID0gbmV3IFNjaGVtYTxJQWR2ZW50dXJlUHJvZ3Jlc3M+KHtcclxuICAgIGFkdmVudHVyZUlkOiB7IHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnQWR2ZW50dXJlJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIGNoYWxsZW5nZXM6IHsgdHlwZTogW2NoYWxsZW5nZVByb2dyZXNzU2NoZW1hXSwgZGVmYXVsdDogW10gfSxcclxuICAgIGlzQWR2ZW50dXJlQ29tcGxldGVkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXHJcbiAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ2luLXByb2dyZXNzJywgJ2NvbXBsZXRlZCddIH0sXHJcbiAgICBwcm9ncmVzczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIHN0YXJzUmV3YXJkOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMTAgfSxcclxuICAgIGNvaW5zUmV3YXJkOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogNSB9LFxyXG59ICwgeyBfaWQ6IGZhbHNlIH0pO1xyXG5cclxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBTY2hlbWE8SVVzZXI+KHtcclxuICAgIF9pZDogeyB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIGF1dG86IHRydWUgfSxcclxuICAgIG5hbWU6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBlbWFpbDoge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IFt0cnVlLCBcIkVtYWlsIGlzIHJlcXVpcmVkXCJdLCAgbWF0Y2g6IFsvXlxcdysoW1xcLi1dP1xcdyspKkBcXHcrKFtcXC4tXT9cXHcrKSooXFwuXFx3ezIsM30pKyQvLCBcIkVtYWlsIGlzIGludmFsaWRcIixdfSxcclxuICAgIGlzVGVtcFBhc3N3b3JkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXHJcbiAgICBwYXNzd29yZENoYW5nZWRBdDogeyB0eXBlOiBEYXRlIH0sXHJcbiAgICBwYXNzd29yZDoge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWV9LFxyXG4gICAgYmlydGhkYXk6e3R5cGU6IERhdGUsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGRhaWx5TWVzc2FnZToge3R5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IFwiWW91IGFyZSBzaGluaW5n8J+SqyFcIn0sXHJcbiAgICBnZW5kZXI6e3R5cGU6IFN0cmluZywgZW51bTogWydmZW1hbGUnLCAnbWFsZSddLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICByb2xlOiB7dHlwZTogU3RyaW5nLCBlbnVtOiBbJ3BhcmVudCcsICdjaGlsZCcsICdhZG1pbiddLCByZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBhdmF0YXI6IHt0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OlwiL2Fzc2V0cy9pbWFnZXMvYXZhdGFycy9wYXJlbnQvYXZhdGFyMS5wbmdcIn0sXHJcbiAgICBpbnRlcmVzdHM6IHt0eXBlOiBbU3RyaW5nXSwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IFtdfSxcclxuICAgIG1lbWJlclNpbmNlOiB7dHlwZTogRGF0ZSwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IERhdGUubm93fSxcclxuICAgIGN1cnJlbnRMb2NhdGlvbjp7dHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogXCJub3Qgc3BlY2lmaWVkXCJ9LFxyXG4gICAgc3RhcnM6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwfSxcclxuICAgIGNvaW5zOiB7dHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogMH0sXHJcbiAgICBuYk9mVGFza3NDb21wbGV0ZWQ6IHt0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiAwfSxcclxuICAgIHJhbmtJbkZhbWlseToge3R5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IDB9LFxyXG4gICAgZmFtaWx5SWQ6IHsgdHlwZTogVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJGYW1pbHlcIiwgZGVmYXVsdDogbnVsbCB9LFxyXG4gICAgYWR2ZW50dXJlczogeyB0eXBlOiBbYWR2ZW50dXJlUHJvZ3Jlc3NTY2hlbWFdLCBkZWZhdWx0OiBbXSB9LFxyXG4gICAgYWNoaWV2ZW1lbnRzOiB7IHR5cGU6IFt1bmxvY2tlZEFjaGlldmVtZW50U2NoZW1hXSwgZGVmYXVsdDogW10gfSxcclxuICAgIHB1cmNoYXNlZEl0ZW1zOiB7IHR5cGU6IFtwdXJjaGFzZWRJdGVtU2NoZW1hXSwgZGVmYXVsdDogW10gfSxcclxuICAgIG5vdGlmaWNhdGlvbnM6IHsgdHlwZTogW25vdGlmaWNhdGlvblNjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sXHJcbiAgICBub3RlczogeyB0eXBlOiBbbm90ZVNjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sXHJcbiAgICBnb2FsczogeyB0eXBlOiBbZ29hbFNjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sXHJcbiAgICBib29rczogeyB0eXBlOiBbYm9va1NjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sIFxyXG4gICAgZHJhd2luZ3M6IHsgdHlwZTogW2RyYXdpbmdTY2hlbWFdLCBkZWZhdWx0OiBbXSB9LCBcclxuICAgIGNvbG9yaW5nczogeyB0eXBlOiBbY29sb3JpbmdTY2hlbWFdLCBkZWZhdWx0OiBbXSB9LCBcclxuICAgIHBlcnNvbmFsU3RvcmllczogeyB0eXBlOiBbc3RvcnlTY2hlbWFdLCBkZWZhdWx0OiBbXSB9LFxyXG59KTtcclxuXHJcbnVzZXJTY2hlbWEuaW5kZXgoeyBuYW1lOiAxLCBlbWFpbDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuXHJcbmV4cG9ydCBjb25zdCBVc2VyID0gbW9kZWw8SVVzZXI+KFwiVXNlclwiLCB1c2VyU2NoZW1hKTsiXSwidmVyc2lvbiI6M30=