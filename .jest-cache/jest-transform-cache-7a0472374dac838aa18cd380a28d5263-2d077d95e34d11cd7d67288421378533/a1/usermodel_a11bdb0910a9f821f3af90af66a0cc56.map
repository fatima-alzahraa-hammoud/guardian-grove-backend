{"file":"C:\\Users\\USER\\Desktop\\guardian-grove\\guardian-grove-backend\\src\\models\\user.model.ts","mappings":"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","names":[],"sources":["C:\\Users\\USER\\Desktop\\guardian-grove\\guardian-grove-backend\\src\\models\\user.model.ts"],"sourcesContent":["import { model, Schema, Types } from \"mongoose\";\r\nimport { IUser } from \"../interfaces/IUser\";\r\nimport { IAdventureProgress, IChallengeProgress } from \"../interfaces/IAdventureProgress\";\r\nimport { IUnlockedAchievement } from \"../interfaces/IUnlockedAchievement\";\r\nimport { IPurchasedItem } from \"../interfaces/IPurschasedItem\";\r\nimport { INotification } from \"../interfaces/INotification\";\r\nimport { INote } from \"../interfaces/INote\";\r\nimport { goalSchema } from \"./schemas/goal.schema\";\r\nimport { notificationSchema } from \"./schemas/notification.schema\";\r\nimport { unlockedAchievementSchema } from \"./schemas/unlockedAchievementSchema.schema\";\r\nimport { bookSchema } from \"./schemas/book.schema\";\r\nimport { drawingSchema } from \"./schemas/drawing.schema\";\r\nimport { coloringSchema } from \"./schemas/coloring.schema\";\r\nimport { storySchema } from \"./schemas/story.schema\";\r\n\r\nconst noteSchema: Schema = new Schema<INote>({\r\n    _id: { type: Schema.Types.ObjectId, auto: true },\r\n    title: { type: String, required: true },\r\n    content: { type: String, required: true },\r\n    type: { type: String, required: true, enum: ['personal', 'family'], default: 'personal' },\r\n    isPinned: {type: Boolean, default:false},\r\n    createdAt: { type: Date, default: Date.now },\r\n    updatedAt: { type: Date, default: Date.now }\r\n});\r\n\r\nconst purchasedItemSchema = new Schema<IPurchasedItem>({\r\n    itemId: { type: Schema.Types.ObjectId, ref: \"StoreItem\", required: true },\r\n    purchasedAt: { type: Date, default: Date.now },\r\n}, { _id: false });\r\n\r\nconst challengeProgressSchema = new Schema<IChallengeProgress>({\r\n    challengeId: { type: Schema.Types.ObjectId, required: true },\r\n    isCompleted: { type: Boolean, default: false },\r\n    completedAt: { type: Date }\r\n    \r\n}, { _id: false });\r\n\r\nconst adventureProgressSchema = new Schema<IAdventureProgress>({\r\n    adventureId: { type: Schema.Types.ObjectId, ref: 'Adventure', required: true },\r\n    challenges: { type: [challengeProgressSchema], default: [] },\r\n    isAdventureCompleted: { type: Boolean, default: false },\r\n    status: { type: String, enum: ['in-progress', 'completed'] },\r\n    progress: { type: Number, default: 0 },\r\n    starsReward: { type: Number, default: 10 },\r\n    coinsReward: { type: Number, default: 5 },\r\n} , { _id: false });\r\n\r\nconst userSchema = new Schema<IUser>({\r\n    _id: { type: Schema.Types.ObjectId, auto: true },\r\n    name: {type: String, required: true },\r\n    email: {type: String, required: [true, \"Email is required\"],  match: [/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/, \"Email is invalid\",]},\r\n    isTempPassword: { type: Boolean, default: false },\r\n    passwordChangedAt: { type: Date },\r\n    password: {type: String, required: true},\r\n    birthday:{type: Date, required: true},\r\n    dailyMessage: {type: String, required: true, default: \"You are shiningðŸ’«!\"},\r\n    gender:{type: String, enum: ['female', 'male'], required: true},\r\n    role: {type: String, enum: ['parent', 'child', 'admin'], required: true},\r\n    avatar: {type: String, required: true, default:\"/assets/images/avatars/parent/avatar1.png\"},\r\n    interests: {type: [String], required: true, default: []},\r\n    memberSince: {type: Date, required: true, default: Date.now},\r\n    currentLocation:{type: String, required: true, default: \"not specified\"},\r\n    stars: {type: Number, required: true, default: 0},\r\n    coins: {type: Number, required: true, default: 0},\r\n    nbOfTasksCompleted: {type: Number, required: true, default: 0},\r\n    rankInFamily: {type: Number, required: true, default: 0},\r\n    familyId: { type: Types.ObjectId, ref: \"Family\", default: null },\r\n    adventures: { type: [adventureProgressSchema], default: [] },\r\n    achievements: { type: [unlockedAchievementSchema], default: [] },\r\n    purchasedItems: { type: [purchasedItemSchema], default: [] },\r\n    notifications: { type: [notificationSchema], default: [] },\r\n    notes: { type: [noteSchema], default: [] },\r\n    goals: { type: [goalSchema], default: [] },\r\n    books: { type: [bookSchema], default: [] }, \r\n    drawings: { type: [drawingSchema], default: [] }, \r\n    colorings: { type: [coloringSchema], default: [] }, \r\n    personalStories: { type: [storySchema], default: [] },\r\n});\r\n\r\nuserSchema.index({ name: 1, email: 1 }, { unique: true });\r\n\r\nexport const User = model<IUser>(\"User\", userSchema);"],"version":3}